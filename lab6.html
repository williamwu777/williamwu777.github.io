document.getElementById('fetchButton').addEventListener('click', fetchCatData);

async function fetchCatData() {
    const url = 'https://brianobruno.github.io/cats.json';
    const options = {
        method: 'GET'
    };

    try {
        const response = await fetch(url, options);
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const result = await response.text();
        const data = JSON.parse(result);
        
        if (data.facts && Array.isArray(data.facts)) {
            data.facts.sort((a, b) => a.factId - b.factId);
            displayFacts(data.facts);
            document.getElementById('factTable').style.display = 'block';
        }

        if (data.imageUrl) {
            updateImage(data.imageUrl);
            document.getElementById('imageContainer').style.display = 'block';
        }
    } catch (error) {
        console.error('Error fetching data:', error);
        alert('Error fetching data. Please try again.');
    }
}

function displayFacts(facts) {
    const tableBody = document.getElementById('factsTableBody');
    tableBody.innerHTML = '';
    facts.forEach(fact => {
        const row = document.createElement('tr');
        const idCell = document.createElement('td');
        idCell.textContent = fact.factId;
        const factCell = document.createElement('td');
        factCell.textContent = fact.text;
        row.appendChild(idCell);
        row.appendChild(factCell);
        tableBody.appendChild(row);
    });
}

function updateImage(imageUrl) {
    if (imageUrl) {
        document.getElementById('catImage').src = imageUrl;
    }
}
